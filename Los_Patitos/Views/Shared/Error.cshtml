@model ErrorViewModel
@using Microsoft.AspNetCore.Hosting
@inject IWebHostEnvironment Env

@{
    ViewData["Title"] = "Error";
    var isDev = Env.EnvironmentName == "Development";
}

<div class="min-h-screen flex items-center justify-center bg-gray-50 px-4">

    <div class="w-full max-w-2xl bg-white border border-gray-200 rounded-xl shadow-sm p-8">

        <!-- Título -->
        <div class="mb-6">
            <h1 class="text-3xl font-bold text-red-700">Ocurrió un error</h1>
            <p class="text-gray-700 mt-2">
                Se produjo un problema al procesar su solicitud. Intente nuevamente.
            </p>
        </div>

        <!-- Request ID -->
        @if (Model.ShowRequestId)
        {
            <div class="mb-6 rounded-lg border border-gray-200 bg-gray-50 px-4 py-3">
                <p class="text-sm text-gray-700">
                    <span class="font-semibold">Request ID:</span>
                    <code class="ml-1 px-1 py-0.5 rounded bg-white border border-gray-200">@Model.RequestId</code>
                </p>
            </div>
        }

        <!-- Acciones -->
        <div class="flex flex-col sm:flex-row gap-3">
            <a asp-controller="Home" asp-action="Index"
               class="inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white
                      px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50">
                Ir al inicio
            </a>

            <button type="button"
                    onclick="history.back()"
                    class="inline-flex items-center justify-center rounded-lg bg-sky-600
                           px-4 py-2.5 text-sm font-medium text-white hover:bg-sky-700">
                Volver
            </button>
        </div>

        <!-- Development info (solo DEV) -->
        @if (isDev)
        {
            <div class="mt-8 border-t border-gray-200 pt-6">
                <h2 class="text-sm font-semibold uppercase text-gray-700">Modo desarrollo</h2>

                <p class="text-sm text-gray-600 mt-2">
                    Cambiar el entorno a <strong>Development</strong> muestra información más detallada del error.
                </p>

                <div class="mt-3 rounded-lg border border-yellow-200 bg-yellow-50 px-4 py-3 text-sm text-yellow-900">
                    <strong>Importante:</strong> no habilite <strong>Development</strong> en producción,
                    ya que podría exponer información sensible.
                </div>

                <p class="text-sm text-gray-600 mt-3">
                    Para depurar localmente, configure la variable
                    <code class="px-1 py-0.5 rounded bg-white border border-gray-200">ASPNETCORE_ENVIRONMENT</code>
                    como
                    <code class="px-1 py-0.5 rounded bg-white border border-gray-200">Development</code>
                    y reinicie la aplicación.
                </p>
            </div>
        }

    </div>
</div>